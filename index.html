<!DOCTYPE html>
<html lang="id">
<head>
Â  <meta charset="utf-8" />
Â  <meta name="viewport" content="width=device-width,initial-scale=1" />
Â  <title>Formulir Absensi Otomatis â€” Responsive</title>
Â  <script src="https://cdn.tailwindcss.com"></script>
Â  <style>
Â  Â  @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap');
Â  Â  body { font-family: 'Inter', sans-serif; background-color: #f3f4f6; }

Â  Â  /* Animasi muncul dropdown */
Â  Â  @keyframes popDown {
Â  Â  Â  from { transform: translateY(-6px) scale(0.98); opacity: 0; }
Â  Â  Â  toÂ  Â { transform: translateY(0) scale(1); opacity: 1; }
Â  Â  }
Â  Â  .menu-appear { animation: popDown 180ms cubic-bezier(.2,.9,.2,1) forwards; }

Â  Â  /* Posisi desktop vs mobile untuk dropdown */
Â  Â  .menu-desktop { top: 1rem; right: 1rem; width: 18rem; }
Â  Â  .menu-mobileÂ  { left: 1rem; right: 1rem; bottom: 1.25rem; top: auto; width: auto; }
Â  </style>
</head>
<body class="min-h-screen flex items-center justify-center p-4">

Â  Â  <div id="overlay" class="hidden fixed inset-0 bg-black/30 z-40"></div>

Â  <div class="relative max-w-md w-full bg-white p-6 sm:p-8 rounded-2xl shadow-xl border border-gray-200">
Â  Â  Â  Â  <div class="absolute top-3 right-3">
Â  Â  Â  <button id="menuBtn" aria-expanded="false" aria-controls="menuDropdown"
Â  Â  Â  Â  Â  Â  Â  class="p-2 rounded-full hover:bg-gray-100 focus:ring-2 focus:ring-blue-400 focus:outline-none">
Â  Â  Â  Â  Â  Â  Â  Â  <span class="sr-only">Buka menu pilihan</span>
Â  Â  Â  Â  <svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden>
Â  Â  Â  Â  Â  <circle cx="12" cy="5" r="1.6" fill="#374151"></circle>
Â  Â  Â  Â  Â  <circle cx="12" cy="12" r="1.6" fill="#374151"></circle>
Â  Â  Â  Â  Â  <circle cx="12" cy="19" r="1.6" fill="#374151"></circle>
Â  Â  Â  Â  </svg>
Â  Â  Â  </button>
Â  Â  </div>

Â  Â  <h1 class="text-2xl font-bold text-gray-800 text-center mb-3">âœ¨ Formulir Absensi Otomatis</h1>
Â  Â  <p id="infoText" class="text-gray-600 text-center mb-6">
Â  Â  Â  Pilih namamu lewat menu â‹® di pojok kanan atas, lalu tekan tombol di bawah untuk absen.
Â  Â  </p>

Â  Â  <div class="flex flex-col sm:flex-row justify-center gap-4">
Â  Â  Â  <button id="absenMasukBtn" class="bg-blue-600 text-white font-semibold py-3 px-6 rounded-full shadow-md hover:bg-blue-700 transition transform hover:scale-105 focus:outline-none focus:ring-2 focus:ring-blue-500 w-full sm:w-auto">
Â  Â  Â  Â  ðŸš€ Absen Masuk
Â  Â  Â  </button>
Â  Â  Â  <button id="absenPulangBtn" class="bg-green-600 text-white font-semibold py-3 px-6 rounded-full shadow-md hover:bg-green-700 transition transform hover:scale-105 focus:outline-none focus:ring-2 focus:ring-green-500 w-full sm:w-auto">
Â  Â  Â  Â  ðŸŒ™ Absen Pulang
Â  Â  Â  </button>
Â  Â  </div>
Â  </div>

Â  Â  <nav id="menuDropdown"
Â  Â  Â  Â class="hidden fixed z-50 bg-white border border-gray-200 rounded-xl shadow-lg overflow-hidden menu-desktop"
Â  Â  Â  Â role="menu" aria-label="Pilih pengguna">
Â  Â  <ul class="divide-y divide-gray-100">
Â  Â  Â  Â  Â  Â  <li>
Â  Â  Â  Â  <a href="?user=sauqi" data-key="sauqi" class="user-select block px-4 py-3 hover:bg-blue-50 hover:text-blue-600 flex items-center gap-3">
Â  Â  Â  Â  Â  <span class="text-lg">ðŸ‘¤</span>
Â  Â  Â  Â  Â  <div>
Â  Â  Â  Â  Â  Â  <div class="font-medium">Sauqi Muhammad Faiq</div>
Â  Â  Â  Â  Â  Â  <div class="text-xs text-gray-500">Institut Pertanian Bogor Â· Teknologi Rekayasa Komputer</div>
Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  </a>
Â  Â  Â  </li>
Â  Â  Â  <li>
Â  Â  Â  Â  <a href="?user=ayla" data-key="ayla" class="user-select block px-4 py-3 hover:bg-blue-50 hover:text-blue-600 flex items-center gap-3">
Â  Â  Â  Â  Â  <span class="text-lg">ðŸ‘¤</span>
Â  Â  Â  Â  Â  <div>
Â  Â  Â  Â  Â  Â  <div class="font-medium">Ayla Helmi Putri Rahayu</div>
Â  Â  Â  Â  Â  Â  <div class="text-xs text-gray-500">IPB University Â· Manajemen Sumberdaya Lahan</div>
Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  </a>
Â  Â  Â  </li>
Â  Â  Â  <li>
Â  Â  Â  Â  <a href="?user=divia" data-key="divia" class="user-select block px-4 py-3 hover:bg-blue-50 hover:text-blue-600 flex items-center gap-3">
Â  Â  Â  Â  Â  <span class="text-lg">ðŸ‘¤</span>
Â  Â  Â  Â  Â  <div>
Â  Â  Â  Â  Â  Â  <div class="font-medium">Divia Hilda Mardika</div>
Â  Â  Â  Â  Â  Â  <div class="text-xs text-gray-500">IPB University Â· Manajemen Sumberdaya Lahan</div>
Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  </a>
Â  Â  Â  </li>
Â  Â  Â  <li>
Â  Â  Â  Â  <a href="?user=finkan" data-key="finkan" class="user-select block px-4 py-3 hover:bg-blue-50 hover:text-blue-600 flex items-center gap-3">
Â  Â  Â  Â  Â  <span class="text-lg">ðŸ‘¤</span>
Â  Â  Â  Â  Â  <div>
Â  Â  Â  Â  Â  Â  <div class="font-medium">Finkan Ahista Puri</div>
Â  Â  Â  Â  Â  Â  <div class="text-xs text-gray-500">IPB University Â· Manajemen Sumberdaya Lahan</div>
Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  </a>
Â  Â  Â  </li>
Â  Â  Â  <li>
Â  Â  Â  Â  <a href="?user=ricko" data-key="ricko" class="user-select block px-4 py-3 hover:bg-blue-50 hover:text-blue-600 flex items-center gap-3">
Â  Â  Â  Â  Â  <span class="text-lg">ðŸ‘¤</span>
Â  Â  Â  Â  Â  <div>
Â  Â  Â  Â  Â  Â  <div class="font-medium">Ricko Mardiansyah</div>
Â  Â  Â  Â  Â  Â  <div class="text-xs text-gray-500">IPB University Â· Manajemen Sumberdaya Lahan</div>
Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  </a>
Â  Â  Â  </li>
      Â  Â  Â  <li>
Â  Â  Â  Â  <a href="?user=kemal" data-key="kemal" class="user-select block px-4 py-3 hover:bg-blue-50 hover:text-blue-600 flex items-center gap-3">
Â  Â  Â  Â  Â  <span class="text-lg">ðŸ‘¤</span>
Â  Â  Â  Â  Â  <div>
Â  Â  Â  Â  Â  Â  <div class="font-medium">Muhammad Kemal Ma'ruf</div>
Â  Â  Â  Â  Â  Â  <div class="text-xs text-gray-500">Universitas Ibn Khaldun Bogor Â· Teknik Informatika</div>
Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  </a>
Â  Â  Â  </li>
Â  Â  </ul>
Â  </nav>

<script>
Â  // Data mahasiswa
Â  const users = {
Â  Â  sauqi:Â  { nama: "Sauqi Muhammad Faiq", kampus: "Institut Pertanian Bogor", prodi: "Teknologi Rekayasa Komputer" },
Â  Â  ayla:Â  Â { nama: "Ayla Helmi Putri Rahayu", kampus: "IPB University", prodi: "Manajemen Sumberdaya Lahan" },
Â  Â  divia:Â  { nama: "Divia Hilda Mardika", kampus: "IPB University", prodi: "Manajemen Sumberdaya Lahan" },
Â  Â  finkan: { nama: "Finkan Ahista Puri", kampus: "IPB University", prodi: "Manajemen Sumberdaya Lahan" },
Â  Â  ricko:Â  { nama: "Ricko Mardiansyah", kampus: "IPB University", prodi: "Manajemen Sumberdaya Lahan" },
    // PENAMBAHAN BARU DI SINI (JS)
Â  Â  kemal:Â  { nama: "Muhammad Kemal Ma'ruf", kampus: "Universitas Ibn Khaldun Bogor", prodi: "Teknik Informatika" }
Â  };

Â  // init selected dari query string (jika ada)
Â  const urlParams = new URLSearchParams(window.location.search);
Â  let selectedKey = urlParams.get('user');
Â  let selectedUser = users[selectedKey];

Â  const infoText = document.getElementById('infoText');
Â  const menuBtn = document.getElementById('menuBtn');
Â  const menuDropdown = document.getElementById('menuDropdown');
Â  const overlay = document.getElementById('overlay');

Â  function updateInfoText() {
Â  Â  if (selectedUser) {
Â  Â  Â  infoText.textContent = `âœ… Kamu login sebagai : ${selectedUser.nama}`;
Â  Â  } else {
Â  Â  Â  infoText.textContent = 'Pilih nama lewat menu â‹® di pojok kanan atas, lalu tekan tombol di bawah untuk absen.';
Â  Â  }
Â  }
Â  updateInfoText();

Â  // Set posisi (desktop / mobile) setiap kali buka menu
Â  function prepareMenuForScreen() {
Â  Â  if (window.innerWidth < 640) {
Â  Â  Â  // mobile: tunjukkan sebagai bottom sheet
Â  Â  Â  menuDropdown.classList.remove('menu-desktop');
Â  Â  Â  menuDropdown.classList.add('menu-mobile');
Â  Â  Â  menuDropdown.style.right = ''; // gunakan left/right via class
Â  Â  Â  menuDropdown.style.left = '';Â 
Â  Â  } else {
Â  Â  Â  // desktop: top-right fixed
Â  Â  Â  menuDropdown.classList.remove('menu-mobile');
Â  Â  Â  menuDropdown.classList.add('menu-desktop');
Â  Â  Â  menuDropdown.style.bottom = '';
Â  Â  }
Â  }

Â  // buka / tutup menu
Â  function openMenu() {
Â  Â  prepareMenuForScreen();
Â  Â  overlay.classList.remove('hidden');
Â  Â  menuDropdown.classList.remove('hidden');
Â  Â  menuDropdown.classList.add('menu-appear');
Â  Â  setTimeout(() => menuDropdown.classList.remove('menu-appear'), 220);
Â  Â  menuBtn.setAttribute('aria-expanded', 'true');
Â  }
Â  function closeMenu() {
Â  Â  overlay.classList.add('hidden');
Â  Â  menuDropdown.classList.add('hidden');
Â  Â  menuBtn.setAttribute('aria-expanded', 'false');
Â  }

Â  menuBtn.addEventListener('click', (e) => {
Â  Â  if (menuDropdown.classList.contains('hidden')) openMenu(); else closeMenu();
Â  });

Â  // tutup jika klik di luar / overlay / ESC
Â  overlay.addEventListener('click', closeMenu);
Â  window.addEventListener('keydown', (e) => { if (e.key === 'Escape') closeMenu(); });

Â  // Klik pilihan nama: prevent default navigation -> set selectedUser, update URL, close menu
Â  document.querySelectorAll('.user-select').forEach(el => {
Â  Â  el.addEventListener('click', (ev) => {
Â  Â  Â  ev.preventDefault();

Â  Â  Â  const redirect = el.dataset.redirect; // jika mau redirect ke URL eksternal, set data-redirect di markup
Â  Â  Â  if (redirect) {
Â  Â  Â  Â  // contoh fallback bila user menaruh data-redirect pada <a>
Â  Â  Â  Â  window.location.href = redirect;
Â  Â  Â  Â  return;
Â  Â  Â  }

Â  Â  Â  const key = el.dataset.key;
Â  Â  Â  if (!users[key]) return;
Â  Â  Â  selectedKey = key;
Â  Â  Â  selectedUser = users[key];

Â  Â  Â  // update UI dan URL tanpa reload
Â  Â  Â  updateInfoText();
Â  Â  Â  history.pushState(null, '', '?user=' + key);
Â  Â  Â  closeMenu();
Â  Â  });
Â  });

Â  // Resize listener: kalau ukuran layar berubah dan menu sedang terbuka, update posisi
Â  window.addEventListener('resize', () => {
Â  Â  if (!menuDropdown.classList.contains('hidden')) prepareMenuForScreen();
Â  });

Â  // Helper: pad angka (opsional)
Â  function pad(n){ return String(n).padStart(2,'0'); }

Â  // Fungsi buka Google Form (masuk / pulang)
Â  function openForm(isMasuk) {
Â  Â  if (!selectedUser) {
Â  Â  Â  alert('âš ï¸ Silakan pilih nama dulu lewat menu â‹® di pojok kanan atas.');
Â  Â  Â  return;
Â  Â  }

Â  Â  const today = new Date();
Â  Â  const tahun = today.getFullYear();
Â  Â  const bulan = today.getMonth() + 1;
Â  Â  const hari = today.getDate();
Â  Â  const jam = today.getHours();
Â  Â  const menit = today.getMinutes();

Â  Â  // isi otomatis ke form google yg kamu pakai (tetap pakai entry IDs seperti sebelumnya)
Â  Â  let baseUrl, fullUrl;
Â  Â  if (isMasuk) {
Â  Â  Â  baseUrl = "https://docs.google.com/forms/d/e/1FAIpQLSf1MNYXwmGaK_5O4nAPetrOtG6xcZXJ51V8X1rxaSKkwIEw3A/viewform?usp=pp_url";
Â  Â  Â  fullUrl = baseUrl
Â  Â  Â  Â  + "&entry.686391925=" + encodeURIComponent(selectedUser.nama)
Â  Â  Â  Â  + "&entry.1972506325=" + encodeURIComponent(selectedUser.kampus)
Â  Â  Â  Â  + "&entry.246045167=" + encodeURIComponent(selectedUser.prodi)
Â  Â  Â  Â  + "&entry.85434654_hour=" + pad(jam)
Â  Â  Â  Â  + "&entry.85434654_minute=" + pad(menit)
Â  Â  Â  Â  + "&entry.145028184_year=" + tahun
Â  Â  Â  Â  + "&entry.145028184_month=" + bulan
Â  Â  Â  Â  + "&entry.145028184_day=" + hari;
Â  Â  } else {
Â  Â  Â  baseUrl = "https://docs.google.com/forms/d/e/1FAIpQLSdvUQSyr31v1m-UYAteC4yGzeQxQ8NMorcOPKNRMy8_Irn8FA/viewform?usp=pp_url";
M   Â  Â  fullUrl = baseUrl
Â  Â  Â  Â  + "&entry.1368394489=" + encodeURIComponent(selectedUser.nama)
Â  Â  Â  Â  + "&entry.596760225=" + encodeURIComponent(selectedUser.kampus)
Â  Â  Â  Â  + "&entry.870001667=" + encodeURIComponent(selectedUser.prodi)
Â  Â  Â  Â  + "&entry.1132357430_hour=" + pad(jam)
Â  Â  Â  Â  + "&entry.1132357430_minute=" + pad(menit)
Â  Â  Â  Â  + "&entry.1122298737_year=" + tahun
Â  Â  Â  Â  + "&entry.1122298737_month=" + bulan
Â  Â  Â  Â  + "&entry.1122298737_day=" + hari;
Â  Â  }

Â  Â  window.open(fullUrl, '_blank');
Â  }

Â  // event tombol
Â  document.getElementById('absenMasukBtn').addEventListener('click', () => openForm(true));
Â  document.getElementById('absenPulangBtn').addEventListener('click', () => openForm(false));
</script>
</body>
</html>
